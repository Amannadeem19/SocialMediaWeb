{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Toshiba\\\\OneDrive\\\\Documents\\\\WEB DEVELOPMENT\\\\Socialmedia\\\\client\\\\src\\\\components\\\\Home\\\\Home.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Grid, Grow, Paper, AppBar, TextField, Button } from '@mui/material';\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport { MuiChipsInput } from 'mui-chips-input';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\nimport Pagination from '../Pagination.jsx';\nimport useStyles from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width,\n    height\n  };\n}\nfunction useQuery() {\n  _s();\n  return new URLSearchParams(useLocation().search);\n}\n_s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\nconst Home = () => {\n  _s2();\n  const classes = useStyles();\n  const [currentId, setCurrentId] = useState(null);\n  // define the hooks\n  // [dispatch] means effect only re-run when the dispatch value changes \n  const dispatch = useDispatch();\n  const query = useQuery();\n  const history = useNavigate();\n  const page = query.get('page') || 1;\n  const searchQuery = query.get('searchQuery');\n  const [search, setSearch] = useState('');\n  const [tags, setTags] = useState([]); // tags = [europe, usa] -> 'europe, usa\n  const navigate = useNavigate();\n  useEffect(() => {\n    dispatch(getPosts());\n  }, [currentId, dispatch]);\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n      console.log(windowDimensions.width);\n    }\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  const searchPost = () => {\n    if (search.trim() || tags) {\n      // dispatch -> fetch search post \n      dispatch(getPostsBySearch({\n        search,\n        tags: tags.join(',')\n      }));\n      navigate(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n    } else {\n      navigate(\"/\");\n    }\n  };\n  const handlePress = e => {\n    //press enter\n    if (e.keyCode === 13) {\n      // search the post\n      search();\n    }\n  };\n  const handleAdd = tag => setTags([...tags, tag]);\n  const handleDelete = tagToBeDelete => setTags(tags.filter(tag => tag !== tagToBeDelete));\n  return /*#__PURE__*/_jsxDEV(Grow, {\n    in: true,\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xl\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: windowDimensions.width <= 600 ? 'column-reverse' : 'row',\n        className: classes.gridContainer,\n        justifyContent: \"space-between\",\n        alignItems: \"stretch\",\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 9,\n          children: /*#__PURE__*/_jsxDEV(Posts, {\n            setCurrentId: setCurrentId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: 6,\n          md: 3,\n          children: [/*#__PURE__*/_jsxDEV(AppBar, {\n            className: classes.appBarSearch,\n            position: \"static\",\n            color: \"inherit\",\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              name: \"search\",\n              label: \"Search Memories\",\n              variant: \"outlined\",\n              fullWidth: true,\n              onKeyPress: handlePress,\n              value: search,\n              onChange: e => setSearch(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(MuiChipsInput, {\n              label: \"Search Tags\",\n              value: tags,\n              style: {\n                margin: '10px 0'\n              },\n              variant: \"outlined\",\n              onAddChip: handleAdd,\n              onDeleteChip: handleDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.searchButton,\n              variant: \"contained\",\n              color: \"primary\",\n              onClick: searchPost,\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            currentId: currentId,\n            setCurrentId: setCurrentId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 6,\n            children: /*#__PURE__*/_jsxDEV(Pagination, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n};\n_s2(Home, \"LcWbi+Z/MGO3Ydx4HHnRr1JK7Kc=\", false, function () {\n  return [useStyles, useDispatch, useQuery, useNavigate, useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","Container","Grid","Grow","Paper","AppBar","TextField","Button","Posts","Form","MuiChipsInput","useNavigate","useLocation","useDispatch","getPosts","getPostsBySearch","Pagination","useStyles","jsxDEV","_jsxDEV","getWindowDimensions","innerWidth","width","innerHeight","height","window","useQuery","_s","URLSearchParams","search","Home","_s2","classes","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","setSearch","tags","setTags","navigate","windowDimensions","setWindowDimensions","handleResize","console","log","addEventListener","removeEventListener","searchPost","trim","join","handlePress","e","keyCode","handleAdd","tag","handleDelete","tagToBeDelete","filter","in","children","maxWidth","container","direction","className","gridContainer","justifyContent","alignItems","spacing","item","xs","sm","md","fileName","_jsxFileName","lineNumber","columnNumber","appBarSearch","position","color","name","label","variant","fullWidth","onKeyPress","value","onChange","target","style","margin","onAddChip","onDeleteChip","searchButton","onClick","elevation","_c","$RefreshReg$"],"sources":["C:/Users/Toshiba/OneDrive/Documents/WEB DEVELOPMENT/Socialmedia/client/src/components/Home/Home.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { Container, Grid, Grow, Paper, AppBar, TextField, Button } from '@mui/material';\r\nimport Posts from '../Posts/Posts'\r\nimport Form from '../Form/Form'\r\nimport {MuiChipsInput} from 'mui-chips-input';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\r\nimport Pagination from '../Pagination.jsx';\r\nimport useStyles from './styles';\r\nfunction getWindowDimensions() {\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    return {\r\n        width,\r\n        height,\r\n    };\r\n}\r\n\r\nfunction useQuery(){\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\nconst Home = () => {\r\n    const classes = useStyles();\r\n    const [currentId, setCurrentId] = useState(null);\r\n    // define the hooks\r\n    // [dispatch] means effect only re-run when the dispatch value changes \r\n    const dispatch = useDispatch();\r\n    const query = useQuery();\r\n    const history = useNavigate();\r\n    const page = query.get('page') || 1;\r\n    const searchQuery = query.get('searchQuery');\r\n    const [search, setSearch] = useState('');\r\n    const [tags, setTags] = useState([]); // tags = [europe, usa] -> 'europe, usa\r\n    const navigate = useNavigate();\r\n    useEffect(()=>{\r\n        dispatch(getPosts())\r\n     }, [currentId,dispatch])\r\n    const [windowDimensions, setWindowDimensions] = useState(\r\n        getWindowDimensions()\r\n    );\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowDimensions(getWindowDimensions());\r\n            console.log(windowDimensions.width);\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    const searchPost = ()=>{\r\n        if(search.trim() || tags){\r\n            // dispatch -> fetch search post \r\n            dispatch(getPostsBySearch({search, tags: tags.join(',')}))\r\n            navigate(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`)\r\n        }else{\r\n            navigate(\"/\");\r\n        }\r\n\r\n    }\r\n    const handlePress = (e)=>{\r\n        //press enter\r\n            if(e.keyCode === 13){\r\n                // search the post\r\n                search();\r\n            }\r\n    }   \r\n    const handleAdd= (tag)=> setTags([...tags, tag]);\r\n    const handleDelete = (tagToBeDelete) => setTags(tags.filter((tag) => tag !== tagToBeDelete))\r\n    \r\n    return (\r\n        <Grow in>\r\n            <Container maxWidth=\"xl\">\r\n                <Grid container direction={windowDimensions.width <= 600 ? 'column-reverse' : 'row'}\r\n                   className={ classes.gridContainer } justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3}>\r\n                    <Grid item xs={12} sm={6} md={9}>\r\n                        <Posts setCurrentId={setCurrentId} />\r\n                    </Grid>\r\n\r\n                    <Grid item xs={12} sm={6} md={3} >\r\n                       <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\r\n                        <TextField\r\n                            name='search'\r\n                            label='Search Memories'\r\n                            variant='outlined'\r\n                            fullWidth\r\n                            onKeyPress={handlePress}\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value) }\r\n\r\n                        />\r\n                        <MuiChipsInput\r\n                        label='Search Tags'\r\n                        value={tags}\r\n                        style={{margin: '10px 0'}}\r\n                        variant='outlined'\r\n                        onAddChip={handleAdd}\r\n                        onDeleteChip={handleDelete}\r\n                        />\r\n                        <Button className={classes.searchButton} variant=\"contained\" color='primary' onClick={searchPost}>Search</Button>\r\n                       </AppBar>\r\n                       \r\n                        <Form currentId={currentId} setCurrentId={setCurrentId} />\r\n                        \r\n                        <Paper elevation={6}>\r\n                           \r\n                            <Pagination/>\r\n                        \r\n                        </Paper>\r\n                    </Grid>\r\n\r\n                </Grid>\r\n            </Container>\r\n\r\n        </Grow>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}